<%= form_with model: @form, scope: :vat_rate_charge, url: energy_case_org_vat_rate_charge_path, method: :patch do |form| %>
  <%= form.govuk_error_summary %>
  <%= form.hidden_field :vat_rate, value: form.object.vat_rate %>

  <%= form.govuk_radio_buttons_fieldset :vat_rate,
    legend: { size: "l", text: I18n.t("energy.vat_rate_charge.heading") },
    hint: { text: I18n.t("energy.vat_rate_charge.hint") } do %>
    <%= form.govuk_radio_button :vat_rate, 20, label: { text: I18n.t("energy.vat_rate_charge.normal") } %>
    <%= form.govuk_radio_button :vat_rate, 5, label: { text: I18n.t("energy.vat_rate_charge.lower") } do %>
      <%= form.govuk_text_field :vat_lower_rate_percentage, width: "one-quarter", suffix_text: "%", label: {text: I18n.t("energy.vat_rate_charge.lower_rate_percentage")} %>
      <%= form.govuk_text_field :vat_lower_rate_reg_no, width: "one-half", label: {text: I18n.t("energy.vat_rate_charge.lower_rate_reg_no")}%>
    <% end %>
  <% end %>

  <%= render EnergyFormButtonsComponent.new(form) %>
<% end %>