<%= content_for :title, I18n.t("exit_survey.title") %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">

    <%= form_with model: @form, scope: :hear_about_service_form, url: exit_survey_hear_about_service_path, method: :patch do |form| %>
    <%= form.govuk_error_summary %> 

    <%= form.hidden_field :hear_about_service, value: form.object.hear_about_service %> 

      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
            <h1 class="govuk-fieldset__heading"><%= I18n.t("exit_survey.hear_about_service.question") %></h1>
          </legend>
          
          <%= form.govuk_radio_buttons_fieldset :hear_about_service, legend: nil do %>
              <% form.object.hear_about_service_options.each do |option| %>
                <% if option == 'other' %>
                  <%= form.govuk_radio_button :hear_about_service, option, label: { text: I18n.t("exit_survey.hear_about_service.options.#{option}") } do %>
                    <%= form.govuk_text_field :hear_about_service_other, label: { text: I18n.t("exit_survey.hear_about_service.please_specify") } %>
                  <% end %>
                <% else %>  
                  <%= form.govuk_radio_button :hear_about_service, option, label: { text: I18n.t("exit_survey.hear_about_service.options.#{option}") } %>
                <% end %>
              <% end %>  
          <% end %>
      </div> 

      <%= form.submit I18n.t("exit_survey.continue"), class: "govuk-button" %>
    <% end %>
  </div>
</div>

